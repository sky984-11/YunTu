import{u as k,a as D,r as l,o as b,w as E,D as B,b as C,c as S,d as s,e as o,f as r,F as H,g as L,h as c,t as d,n as u,i as T,j as F,T as R}from"./index-D7gtUUeB.js";const j={class:"grid grid-cols-12 gap-8"},N={key:0,class:"col-span-12 text-center py-8 text-gray-400"},V=["onClick"],$={class:"card mb-0"},I={class:"flex justify-between mb-4"},M={key:0,class:"block text-muted-color font-medium mb-4"},O={class:"font-medium text-muted-color"},Y={key:1,class:"col-span-12 text-center py-8"},_=20,A={__name:"Dashboard",setup(z){const m=k(),y=D(),a=l([]),v=l(1),n=l(!1),p=l(!1);b(()=>{f(),window.addEventListener("scroll",h)}),E(()=>m.records,()=>{a.value=m.records});async function f(){if(!(n.value||p.value)){n.value=!0;try{const t=await B.list("transactions",null,"account_categories",`transactions.category_id = account_categories.category_id ORDER BY created_at DESC LIMIT ${_} OFFSET ${(v.value-1)*_}`);t.length<_&&(p.value=!0),a.value=[...a.value,...t],v.value++}catch(t){console.error("Error loading data:",t)}finally{n.value=!1}}}function h(){const t=window.scrollY,g=window.innerHeight,i=document.documentElement.scrollHeight;t+g>=i-10&&!n.value&&f()}function w(t){y.push({name:"details",params:{records_id:t.records_id}})}return C(()=>{window.removeEventListener("scroll",h)}),(t,g)=>{const i=S("font-awesome-icon"),x=R;return s(),o("div",j,[a.value.length===0?(s(),o("div",N," 暂无账单数据 ")):r("",!0),(s(!0),o(H,null,L(a.value,e=>(s(),o("div",{key:e.records_id,class:"col-span-12 lg:col-span-6 xl:col-span-3",onClick:U=>w(e)},[c("div",$,[c("div",I,[c("div",null,[e.payee?(s(),o("span",M,d(e.payee),1)):r("",!0),c("div",{class:u(["font-medium text-xl",{"text-red-500":e.type=="true","text-green-500":e.type=="false"}])},d(e.amount),3)]),T((s(),o("div",{class:u(["flex items-center justify-center",e.bg_color]),style:{width:"2.5rem",height:"2.5rem"}},[F(i,{icon:["fas",e.icon],class:u(e.color+" !text-xl")},null,8,["icon","class"])],2)),[[x,e.name,void 0,{top:!0}]])]),c("span",O,d(e.created_at),1)])],8,V))),128)),n.value?(s(),o("div",Y," 正在加载更多数据... ")):r("",!0)])}}};export{A as default};
